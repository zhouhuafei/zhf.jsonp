"use strict";var extend=require("zhf.extend"),qs=require("zhf.query-string"),typeOf=require("zhf.type-of");module.exports=function(e){var t=extend({url:"",data:{},callbackName:null,callback:function(){}},e),a=t.url,r=t.data,n=t.callbackName,c=t.callback;if(a){var l=(""+Math.random()).substring(2),d="jsonpCallback"+(new Date).getTime()+l;n&&"string"===typeOf(n)&&(d=n),window[d]=function(e){c(null,e)};var i=document.createElement("script");i.addEventListener("error",function(){document.body.removeChild(i),c({status:"error",message:"接口出错"},{})}),i.addEventListener("load",function(){document.body.removeChild(i)});var o=qs.queryStringify(r);i.src=o?a+"?"+o+"&callback="+d:a+"?callback="+d,document.body.appendChild(i)}};