"use strict";var extend=require("zhf.extend"),qs=require("zhf.query-string");module.exports=function(e){var r=extend({url:"",data:{},callback:function(){}},e),t=r.url,n=r.data,a=r.callback;if(t){var d=(""+Math.random()).substring(2),c="jsonpCallback"+(new Date).getTime()+d;window[c]=function(e){a(null,e)};var o=document.createElement("script");o.addEventListener("error",function(){document.body.removeChild(o),a({status:"error",message:"接口出错"},{})}),o.addEventListener("load",function(){document.body.removeChild(o)});var i=qs.queryStringify(n);o.src=i?t+"?"+i+"&callback="+c:t+"?callback="+c,document.body.appendChild(o)}};