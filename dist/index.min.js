"use strict";var extend=require("zhf.extend"),qs=require("zhf.query-string");module.exports=function(e){var n=extend({url:"",data:{},callback:function(){}},e),r=n.url,t=n.data,a=n.callback;if(r){var o=(""+Math.random()).substring(2),d="jsonpCallback"+(new Date).getTime()+o;window[d]=function(e){a(null,e)};var c=document.createElement("script");c.addEventListener("error",function(){document.body.removeChild(c),a({status:"error",message:"接口出错"},{})}),c.addEventListener("load",function(){document.body.removeChild(c)});var l=qs.queryStringify(t);console.log(l),c.src=l?r+"?"+l+"&callback="+d:r+"?callback="+d,document.body.appendChild(c)}};